var canvasppt_fbee7692528865b30777;canvasppt_fbee7692528865b30777=(()=>{var t={888:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>J});var s={};i.r(s),i.d(s,{qH:()=>c,Bi:()=>l,JH:()=>f,sj:()=>d});const{hasOwnProperty:r}=Object.prototype;function n(t,e){return r.call(t,e)}const o=[1,0,0,1,0,0],a=window.devicePixelRatio||window.webkitDevicePixelRatio||window.mozDevicePixelRatio||1,h={},l=function(){};function c(t,e,i,s){const r=function(...t){this._initOption(t[0]),this.initialize(...t)};return r.superclass=t,(r.prototype=Object.create(t.prototype)).constructor=r,r.prototype.callSuper=p,r.options=f(t.options,e),function(t,e){for(const i in e)e[i]&&(t.prototype[i]=e[i])}(r,i),r.prototype.initialize||(r.prototype.initialize=l),s&&(h[s]=r),r}function f(t,e){const i={};for(const e in t)s(e);for(const i in e)n(t,e)&&s(i);function s(s){i[s]=e[s]?t[s]:e[s]}return i}const u={enumerable:!0,configurable:!0,get:l,set:l};function d(t,e,i){u.get=function(){return this[e][i]},u.set=function(t){this[e][i]=t},Object.defineProperty(t,i,u)}function p(...[t]){const e=t[0];let i=null,s=this;for(;s.constructor.superclass;){const t=s.constructor.superclass.prototype[e];if(s[e]!==t){i=t;break}s=s.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,t.slice(1)):i.call(this):console.log(`tried to callSuper ${e}, method not found in prototype chain`,this)}function g(t,e){if(window.getComputedStyle){const i=window.getComputedStyle(t,null);return i?i[e]:null}let i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i}function y(){return document.createElement("img")}function m(t,e){return new Promise(((i,s)=>{t||s(new Error("url为空"));let r=y();r.onload=function(){i(r)},r.onerror=function(){s(new Error(`Error loading ${t}`)),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&e&&(r.crossOrigin=e),r.src=t}))}function w(t){return"string"==typeof t?document.getElementById(t):t}function v(t,e){t&&-1===t.className.indexOf(e)&&(t.className+=(t.className?" ":"")+e)}const b=new Error("Could not initialize `canvas` element"),x=c(l,{backgroundImage:null,backgroundColor:""},{_createCanvasElement(){const t=document.createElement("canvas");if(!t)throw b;if(t.style||(t.style={}),void 0===t.getContext)throw b;return t},bindOptionObject(){const t=Object.keys(this.options);let e=t.length;for(;e--;)d(this,"_options",t[e])},_initOption(t){this._options=f(this.constructor.options,t),this.bindOptionObject()}});function k(t,e){this.x=t,this.y=e}k.prototype={type:"point",constructor:k,add(t){return new k(this.x+t.x,this.y+t.y)},addEquals(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd(t){return new k(this.x+t,this.y+t)},eq(t){return this.x===t.x&&this.y===t.y},subtractEquals(t){return this.x-=t.x,this.y-=t.y,this},setXY(t,e){return this.x=t,this.y=e,this},setX(t){return this.x=t,this},setY(t){return this.y=t,this},setFromPoint(t){return this.x=t.x,this.y=t.y,this},swap(t){const{x:e}=this,{y:i}=this;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone(){return new k(this.x,this.y)},toString(){return`${this.x},${this.y}`}};const _=k;function O(t,e,i){if(!t||0===t.length)return;let s=t.length-1,r=e?t[s][e]:t[s];if(e)for(;s--;)i(t[s][e],r)&&(r=t[s][e]);else for(;s--;)i(t[s],r)&&(r=t[s]);return r}function C(t,e){return O(t,e,((t,e)=>t<e))}function T(t,e){return O(t,e,((t,e)=>t>=e))}const S=c({},{},{repeat:"repeat",initialize(t,e){if(t||(t={}),this.id=V.__uid++,!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else{var i=this;this.source=y(),m(t.source,this.crossOrigin).then((t=>{i.source=t,e&&e(i)}))}}}),{sqrt:X}=Math,{atan2:Y}=Math,{pow:P}=Math,j=Math.PI/180,E=Math.PI/2;function B(t,e){return parseFloat(Number(t).toFixed(e))}function D(t,e,i){t.subtractEquals(e);const s=function(t,e){const i=function(t){if(0===t)return 0;let e=1;switch(t<0&&(e=-1),t/E){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)}(e),s=function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/E){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)}(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}(t,i);return _(s.x,s.y).addEquals(e)}function R(t){return t*j}function L(t,e,i){return i?new _(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new _(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])}function M(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]}function z(t){const e=Y(t[1],t[0]),i=P(t[0],2)+P(t[1],2),s=X(i),r=(t[0]*t[3]-t[2]*t[1])/s,n=Y(t[0]*t[2]+t[1]*t[3],i);return{angle:e/j,scaleX:s,scaleY:r,skewX:n/j,skewY:0,translateX:t[4],translateY:t[5]}}function A(t,e,i){const s=t/2,r=e/2,n=function(t,e){if(e)for(let i=0;i<t.length;i++)t[i]=L(t[i],e);const i=[t[0].x,t[1].x,t[2].x,t[3].x],s=C(i),r=T(i)-s,n=[t[0].y,t[1].y,t[2].y,t[3].y],o=C(n);return{left:s,top:o,width:r,height:T(n)-o}}([{x:-s,y:-r},{x:s,y:-r},{x:-s,y:r},{x:s,y:r}],function(t){const e=void 0===t.scaleX?1:t.scaleX,i=void 0===t.scaleY?1:t.scaleY;let s=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0];const r=M;return t.skewX&&(s=r(s,[1,0,Math.tan(R(t.skewX)),1],!0)),t.skewY&&(s=r(s,[1,Math.tan(R(t.skewY)),0,1],!0)),s}(i));return{x:n.width,y:n.height}}const F=[],I={left:-.5,center:0,right:.5},W={top:-.5,center:0,bottom:.5},N={getCenterPoint(){const t=new _(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},translateToCenterPoint(t,e,i){const s=this.translateToGivenOrigin(t,e,i,"center","center");return this.angle?D(s,t,R(this.angle)):s},translateToGivenOrigin(t,e,i,s,r){let n,{x:o}=t,{y:a}=t;"string"==typeof e?e=I[e]:e-=.5,"string"==typeof s?s=I[s]:s-=.5;const h=s-e;"string"==typeof i?i=W[i]:i-=.5,"string"==typeof r?r=W[r]:r-=.5;const l=r-i;return(h||l)&&(n=this._getTransformedDimensions(),o=t.x+h*n.x,a=t.y+l*n.y),new _(o,a)},_getTransformedDimensions(t,e){void 0===t&&({skewX:t}=this),void 0===e&&({skewY:e}=this);const i=this._getNonTransformedDimensions();let s,r;const n=0===t&&0===e;if(this.strokeUniform?(s=this.width,r=this.height):(s=i.x,r=i.y),n)return this._finalizeDimensions(s*this.scaleX,r*this.scaleY);const o=A(s,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(o.x,o.y)},_finalizeDimensions(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}}},U=c(x,{top:0,left:0,width:0,height:0,originX:"left",originY:"top",opacity:1,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,shadow:null,visible:!0,angle:0,cornerSize:5,borderColor:"rgb(142,219,223)",globalCompositeOperation:"",borderScaleFactor:1,strokeUniform:!1,cornerDashArray:null,hasBorders:!0},{type:"object",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix\n    stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit\n    angle opacity fill globalCompositeOperation shadow visible backgroundColor\n    skewX skewY fillRule paintFirst clipPath strokeUniform".split(""),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst \nstrokeUniform  strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),initialize(){},render(t){this.isNotVisible()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this))},_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();const e=this.getCenterPoint(),i=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/s[0],1/s[3]),t.rotate(R(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},getObjectOpacity(){let{opacity:t}=this;return this.group&&(t*=this.group.getObjectOpacity()),t},_setShadow(t){if(!this.shadow)return;const{shadow:e}=this,{canvas:i}=this;let s,r=i&&i.viewportTransform[0]||1,n=i&&i.viewportTransform[3]||1;s=e.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(r*=a,n*=a),t.shadowColor=e.color,t.shadowBlur=1*e.blur*(r+n)*(s.scaleX+s.scaleY)/4,t.shadowOffsetX=e.offsetX*r*s.scaleX,t.shadowOffsetY=e.offsetY*n*s.scaleY},getObjectScaling(){const t=z(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},_renderControls(t,e){const i=this.getViewportTransform();let s=this.calcTransformMatrix();const r=void 0!==(e=e||{}).hasBorders?e.hasBorders:this.hasBorders,n=void 0!==e.hasControls?e.hasControls:this.hasControls;s=M(i,s);const o=z(s);t.save(),t.translate(o.translateX,o.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),e.forActiveSelection?(t.rotate(R(o.angle)),r&&this.drawBordersInGroup(t,o,e)):(t.rotate(R(this.angle)),r&&this.drawBorders(t,e)),n&&this.drawControls(t,e),t.restore()},getViewportTransform(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.concat()},_setLineDash(t,e,i){e&&0!==e.length&&(1&e.length&&(e=e.concat(e)),void 0!==t.setLineDash?t.setLineDash(e):i&&i(t))},_renderPaintInOrder(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_renderFill(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke(t){if(this.stroke&&0!==this.strokeWidth){if(t.save(),this.strokeUniform&&this.group){const e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&"percentage"===this.stroke.gradientUnits?this._applyPatternForTransformedGradient(t,this.stroke):this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore()}},_applyPatternGradientTransform(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,s=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,s,r):t.transform(1,0,0,1,s,r),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:s,offsetY:r}},_render(){throw Error("当前元素类型尚未实现渲染方案")},toObject(){return{type:this.type,originX:this.originX,originY:this.originY,left:B(this.left,2),top:B(this.top,2),width:B(this.width,2),height:B(this.height,2),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:B(this.strokeWidth,2),angle:B(this.angle,2),opacity:B(this.opacity,2),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor}},...N});U.__uid=0,U._fromObject=function(t,e,i,r){var n=h[t];!function(t,e){function i(){++r===n&&e&&e(s)}var s=[],r=0,n=(t=t||[]).length;n?t.forEach((function(t,e){t&&t.source?new S(t,(function(t){s[e]=t,i()})):(s[e]=t,i())})):e&&e(s)}([(e=(0,s.clone)(e,!0)).fill,e.stroke],(function(t){void 0!==t[0]&&(e.fill=t[0]),void 0!==t[1]&&(e.stroke=t[1]),fabric.util.enlivenObjects([e.clipPath],(function(t){e.clipPath=t[0];var s=r?new n(e[r],e):new n(e);i&&i(s)}))}))};const V=U,$=c(V,{filters:[]},{type:"image",dirty:!1,_filterScalingX:1,_filterScalingY:1,initialize(t,e){this.cacheKey="texture"+V.__uid++,this._initElement(e)},setElement(t){return this._element=t,this._originalElement=t,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},_initConfig(t){this.width||(this.width=t.naturalWidth||t.width||0),this.height||(this.height=t.naturalHeight||t.height||0)},_initElement(t){this.setElement(w(t)),v(this.getElement(),$.CSS_CANVAS)},getElement(){return this._element||{}},applyFilters(t){},applyResizeFilters(){console.log()}});$.CSS_CANVAS="canvas-img";const q=$,G=c(x,{width:120,height:90,controlsAboveOverlay:!1},{viewportTransform:o.concat(),clipPath:null,isRendering:0,initialize(t,e){this.renderAllBound=this.renderAll.bind(this),this._initStatic(t,e)},_initStatic(t,e){this.createLowerCanvas(t),this.setCanvasStyle(e),this.options.backgroundImage&&this.setBackgroundImage(e.backgroundImage),this.needRenderAndReset=!1,F.push(this)},createLowerCanvas(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=w(t)||this._createCanvasElement(),v(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this.applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},setCanvasStyle(){const{lowerCanvasEl:t}=this;t.height=this.height,t.width=this.width,t.style.height=`${this.height}px`,t.style.width=`${this.width}px`},async setBgOverlayImage(t,e,i,s){if("string"==typeof e){const r=await m(e,s&&s.crossOrigin),n=new q(r,s);this[t]=n,n.canvas=this,i&&i(r)}else s&&e.setOptions(s),this[t]=e,e&&(e.canvas=this),i&&i(e,!1);return this},setBackgroundImage(t,e,i){return this.setBgOverlayImage("backgroundImage",t,e,i)},calcOffset(){return this._offset=function(t){const e=t&&t.ownerDocument;let i={left:0,top:0};const s={left:0,top:0},r={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!e)return s;for(const e in r)e in r&&(s[r[e]]+=parseInt(g(t,e),10)||0);const n=e.documentElement;void 0!==t.getBoundingClientRect&&(i=t.getBoundingClientRect());const o=function(t){let e=0,i=0;const s=document.documentElement,r=document.body||{scrollLeft:0,scrollTop:0};for(;t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===document?(e=r.scrollLeft||s.scrollLeft||0,i=r.scrollTop||s.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:i}}(t);return{left:i.left+o.left-(n.clientLeft||0)+s.left,top:i.top+o.top-(n.clientTop||0)+s.top}}(this.lowerCanvasEl),this},renderAll(){const t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderCanvas(t,e){this.isRendering=1;const i=this.viewportTransform;this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},calcViewportBoundaries(){const t={},{width:e}=this,{height:i}=this,s=function(t){const e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],s=L({x:t[4],y:t[5]},i,!0);return i[4]=-s.x,i[5]=-s.y,i}(this.viewportTransform);return t.tl=L({x:0,y:0},s),t.br=L({x:e,y:i},s),t.tr=new _(t.br.x,t.tl.y),t.bl=new _(t.tl.x,t.br.y),this.vptCoords=t,t},clearContext(t){return t.clearRect(0,0,this.width,this.height),this},_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")},_renderBackgroundOrOverlay(t,e){const i=this[`${e}Color`],s=this[`${e}Image`],r=this.viewportTransform,n=this[`${e}Vpt`];if(i||s){if(i){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,n&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const e=i.gradientTransform||i.patternTransform;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.fill(),t.restore()}s&&(t.save(),n&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),s.render(t),t.restore())}},_renderObjects(t,e){let i,s;for(i=0,s=e.length;i<s;++i)e[i]&&e[i].render(t)},getRetinaScaling:()=>a}),H=c(V,{},{type:"rect",rx:0,ry:0,cacheProperties:V.prototype.cacheProperties.concat("rx","ry"),initialize(){this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render(t){const e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,r=this.height,n=-this.width/2,o=-this.height/2,a=0!==e||0!==i,h=.4477152502;t.beginPath(),t.moveTo(n+e,o),t.lineTo(n+s-e,o),a&&t.bezierCurveTo(n+s-h*e,o,n+s,o+h*i,n+s,o+i),t.lineTo(n+s,o+r-i),a&&t.bezierCurveTo(n+s,o+r-h*i,n+s-h*e,o+r,n+s-e,o+r),t.lineTo(n+e,o+r),a&&t.bezierCurveTo(n+h*e,o+r,n,o+r-h*i,n,o+r-i),t.lineTo(n,o+i),a&&t.bezierCurveTo(n,o+h*i,n+h*e,o,n+e,o),t.closePath()},_renderDashedStroke(){},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))}},"RectClass");H.fromObject=function(t){return V._fromObject("Rect",t)};const J={StaticCanvas:G,PointClass:_,RectClass:H}},66:(t,e,i)=>{t.exports=i}},e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}return i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(66)})();